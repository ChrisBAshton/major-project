<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="<?php echo $ENCODING; ?>" />
		<title>ODR Test</title>
		<base href="<?php echo $SCHEME.'://'.$HOST.':'.$PORT.$BASE.'/'; ?>" />

		<link rel="stylesheet" href="/ui/css/bootstrap.css">
		<link rel="stylesheet" href="/ui/css/style.css">
	</head>
	<body>
		<header class="container">
			<div class="col-sm-4">
			    <a href="/"><img class="logo" src="ui/images/logo.png"></a>
			    Alpha version <?php //echo $VERSION; ?>
			</div>

		    <div class="col-sm-4">
				<p>
					<?php
						if (isset($notifications)) {
							if (count($notifications) > 0) {
								echo 'You have <a href="/notifications">' . count($notifications) . ' new notifications</a>.';
							}
							else {
								echo 'No new notifications.';
							}
						}
					?>
				</p>
			</div>

		    <div class="col-sm-4 alignright">
				<p>
					<?php
						if (isset($account)) {
							echo 'Welcome back, ' . $account->getName() . '. <a href="/logout">Logout</a>';
						}
						else {
							echo '<a href="/login">Login</a> | <a href="/register">Register</a>';
						}
					?>
				</p>
			</div>
		</header>

		<div class="container">
			<?php
				$breadcrumbs = array();

				$urlParts = explode('/', $_SERVER['REQUEST_URI']);
				$i = 1;
				$url = '';
				foreach($urlParts as $part){
					if (strlen($part) > 0) {
						$url = $url . '/' . $part;
						if ($i < count($urlParts)) {
							$breadcrumbs[] = array(
								'url'   => $url,
								'title' => ucfirst($part)
							);
						}
						$i++;
					}
				}

				if (count($breadcrumbs) > 0) {
					echo '<a href="/">Home</a>';
				}
				foreach($breadcrumbs as $crumb) {
					echo ' / <a href="' . $crumb['url'] .'">' . $crumb['title'] . '</a>';
				}
			?>
		</div>

		<div class="container">
			<?php echo $this->render(Base::instance()->get('content')); ?>
		</div>

		<footer>
		    <p>
		    	Proudly powered by <?php echo $PACKAGE; ?>. Licensed under the terms of the GPLv3. Copyright &copy; 2015
			</p>
		    <p class="stats">
		    	<code><?php echo Base::instance()->format('Page rendered in {0} msecs / Memory usage {1} Kibytes',round(1e3*(microtime(TRUE)-$TIME),2),round(memory_get_usage(TRUE)/1e3,1)); ?></code>
		    </p>
		</footer>
	</body>
</html>